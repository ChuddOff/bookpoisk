# üìö BookParser ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –∫–Ω–∏–≥–∞—Ö

BookParser ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –∞–Ω–∞–ª–∏–∑–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏–π –∫–Ω–∏–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–π 
—è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏, —Ä–∞–±–æ—Ç–∞—é—â–µ–π —á–µ—Ä–µ–∑ LM Studio.

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–ø—É—Å–∫:
- –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Python;
- —á–µ—Ä–µ–∑ CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞ –±–∞–∑–µ Typer);

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∫–Ω–∏–≥–∞—Ö.
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM (—á–µ—Ä–µ–∑ LM Studio API).
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
- CLI-–∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –∑–∞–ø–∏—Å–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (dry-run).

---

## üß© –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```shell
  pip install -r requirements.txt
```

---

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏ LM Studio

–°–∫–∞—á–∞—Ç—å –º–æ–∂–Ω–æ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞:

üëâ https://lmstudio.ai/

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `lms` –¥–æ–±–∞–≤–ª–µ–Ω –≤ PATH.
2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ LM Studio CLI –¥–æ—Å—Ç—É–ø–µ–Ω:
```shell
    lms --help
```
3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–∫–∞—á–∞–π –Ω—É–∂–Ω—É—é –º–æ–¥–µ–ª—å –∑–∞—Ä–∞–Ω–µ–µ:
```shell
  lms load maziyarpanahi/mistral-7b-instruct-v0.3 --gpu 0.5 --context-length 4096
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
### üîπ –í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî —á–µ—Ä–µ–∑ Python
```shell
    python -m main_package
```

---

### üîπ –í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî —á–µ—Ä–µ–∑ CLI-–∫–æ–º–∞–Ω–¥—ã

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ.

```shell
    bookparser parse
```

üìñ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

| –ö–æ–º–∞–Ω–¥–∞       | –ê—Ä–≥—É–º–µ–Ω—Ç—ã                                | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
| ------------- |------------------------------------------| ------------------------------------------ |
| `parse`       | `--start`, `--end`, `--debug`, `--power` | –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–∏–≥     |
| `dry-run`     | `--start`, `--end`, `--debug`            | –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É          |
| `load-backup` | `--path`                                 | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –±—ç–∫–∞–ø –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å —ç—Ç–æ–π —Ç–æ—á–∫–∏  |
| `metrics`     | ‚Äî                                        | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞–±–æ—Ç—ã          |
| `clear-db`    | ‚Äî                                        | ‚ö†Ô∏è –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–æ–ø–∞—Å–Ω–æ!) |

–ü—Ä–∏–º–µ—Ä—ã:
```shell
    bookparser parse --start 0 --end 100
```
```shell
    bookparser dry-run --debug
```

---

## üí° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã

–í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞ –º–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø—Ä—è–º–æ –≤ –∫–æ–Ω—Å–æ–ª—å:
- `metrics` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏;
- `exit` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–µ—Ä –∏ –≤—ã–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å.

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ LM Studio

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ LM Studio –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.
–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤—Ä–æ–¥–µ:

```shell
    GENERATION: Error code: 400 - {'error': 'Model unloaded.'}
    GENERATION: Connection error.
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –º–æ–¥–µ–ª—å –±—ã–ª–∞ –≤—ã–≥—Ä—É–∂–µ–Ω–∞ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä LM Studio –≤—ã–∫–ª—é—á–µ–Ω.
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —Ç–µ–∫—É—â—É—é –∫–Ω–∏–≥—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è.

–¢–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –º–æ–¥–µ–ª–∏:
```shell
    START MODEL: Command [...] returned non-zero exit status 1
    Program 'lms.exe' failed to run: The process cannot access the file because it is being used by another process
```

üß† –≠—Ç–æ –æ–±—ã—á–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ LM Studio —É–∂–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.
–†–µ—à–µ–Ω–∏–µ: –∑–∞–∫—Ä–æ–π LM Studio –∏–ª–∏ –ø–æ–¥–æ–∂–¥–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏.

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏

–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `logs/` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è).
–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:

```shell
    [2025-11-02 00:42:51]: GENERATION: Error code: 400 - {'error': 'Model unloaded.'}
    [2025-11-02 00:43:01]: GENERATION: Connection error.
```

–î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å:
```shell
    bookparser metrics
```

---

## üß† –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã
- –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ —ç—Ç–∞–ø–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Äî –ø—Ä–æ–≤–µ—Ä—å, –Ω–µ –±—ã–ª –ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω LM Studio.
- –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (`--context-length`) –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏.
- –î–ª—è —Ç–µ—Å—Ç–∞ –±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–π `dry-run`.
- –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö (`BACKUP`).